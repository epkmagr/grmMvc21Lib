{# templates/me.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Cardgame{% endblock %}

{% block content %}
<div class="container-fluid" id="dealDiv" role="main">
    <div class="jumbotron">
        <h1>Kortspel 21</h1>
    </div>
    <div class="row">
        <div class="col-md-1 home21">
            <a href="{{ path('card') }}">&#8617;</a>
        </div>
        <div class="col-md-6">
            <h3 class="h3Left">{{ bank.getName() }}</h3>
            {% for card in bank.getHand().getCards() %}
                {% set suit = card.getSuit() %}
                {% set value = card.getValue() %}
                <div {% if 'hearts' in suit or 'diams' in suit %} class="cardDeal red" {% else %} class="cardDeal" {% endif %}>
                    <div class="top">
                        <span class="number">{{ value }}</span>
                        <span class="icon">{{ suit | raw }}</span>
                    </div>
                    <div class="lg_icon">{{ suit | raw }}</div>
                    <div class="bottom">
                        <span class="icon rotate">{{ suit | raw }}</span>
                        <span class="number rotate">{{ value }}</span>
                    </div>
                </div>
            {% endfor %}
            {% set bankScoreLow = bank.getScoreLow() %}
            {% set bankScoreHigh = bank.getScoreHigh() %}
            <h3 class="h3Left">Poäng: {{bankScoreLow ~ '/' ~ bankScoreHigh }} </h3>
            {% set win = bank.getBankResult() %}
            <h3 class="h3Left">{{ win }}</h3>
        </div>
        <div class="col-md-2">
            <h3>Antalet kort kvar</h3>
            <h3>{{ noOfCardsLeft }}</h3>
        </div>
        <div class="col-md-2 col-md-offset-1">
            <form method="post">
                <div class="center">
                    <label for="html">Antal spelare: </label>
                    <input class="numberInput" type="number" name="noOfPlayers" max="4" min="1"
                        value={{ app.request.get('players') }}>
                    <br>
                    <label for="html">Antal kort: </label>
                    <input class="numberInput" type="number" name="noOfCards" max="3" min="1"
                        value={{ app.request.get('cards') }}>
                    <input class="submitButton" type="submit" name="setup" value="Välj setup">
                    <input class="submitButton" type="submit" name="deal" value="Spela">
                    <input class="submitButton" type="submit" name="clear" value="Återställ">
                </div>
            </form>
        </div>
    </div>
    <div class="row" style="margin-bottom:4em;">
        {% for player in myPlayers %}
            <div class="col-md-2 col-md-offset-1">
                <h3 class="h3Left"> {{ player.getName()}} </h3>
                {% for card in player.getHand().getCards() %}
                    {% set suit = card.getSuit() %}
                    {% set value = card.getValue() %}
                    <div {% if 'hearts' in suit or 'diams' in suit %} class="cardDeal red" {% else %} class="cardDeal" {% endif %}>
                        <div class="top">
                            <span class="number">{{ value }}</span>
                            <span class="icon">{{ suit | raw }}</span>
                        </div>
                        <div class="lg_icon">{{ suit | raw }}</div>
                        <div class="bottom">
                            <span class="icon rotate">{{ suit | raw }}</span>
                            <span class="number rotate">{{ value }}</span>
                        </div>
                    </div>
                {% endfor %}
                {% set playerScoreLow = player.getScoreLow() %}
                {% set playerScoreHigh = player.getScoreHigh() %}
                {% set win = player.getPlayerResult() %}
                <h3 class="h3Left">Poäng: {{ playerScoreLow }}/{{ playerScoreHigh }}</h3>
                <h3 class="h3Left">{{ win }}</h3>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
